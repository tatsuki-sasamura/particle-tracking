# direnv configuration for automatic venv activation
# Install direnv and run 'direnv allow' to use this

if [ -f .venv/bin/activate ] && [ -z "$VIRTUAL_ENV" ]; then
    source .venv/bin/activate

    # Always use latest pyright version
    export PYRIGHT_PYTHON_FORCE_VERSION=latest
    PATH_add -p .venv/bin

    echo "Activated particle-tracking virtual environment"
else
    echo "No virtual environment found. Run: python -m venv .venv"
fi

# Set environment variables for development
path_add PYTHONPATH "$PWD/src"

# Create local bin directory for command shortcuts
mkdir -p "$PWD/.local/bin"
path_add PATH "$PWD/.local/bin"

# Make all scripts executable
chmod +x "$PWD/.local/bin/"* 2>/dev/null || true
